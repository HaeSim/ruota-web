# RUOTA 예약 프로세스 PRD

## 1. 목적

- 커피트럭/디저트 케이터링 예약을 온라인에서 쉽고 신뢰성 있게 처리
- 고객은 직관적으로 예약, 관리자는 효율적으로 접수·관리·피드백

---

## 2. 사용자 예약 플로우

### 2.1. 예약 진입

- [예약하기] 버튼 또는 메뉴에서 `/reservation` 진입
- 로그인/비로그인 모두 예약 가능(단, 비회원은 예약 내역 확인 불가)

### 2.2. 예약 폼 입력

- **필수 입력값**
  - 행사 날짜/시간 (DateTimePicker)
  - 행사 장소 (주소 자동완성, 상세주소)
  - 서포트 대상 (텍스트)
  - 예약자 정보 (이름, 소속, 연락처)
  - 메뉴 선택 (음료 세트, 디저트, 수량)
  - 현장 전기지원 여부 (라디오: 가능/불가능/모름)
- **선택 입력값**
  - 기타 요청사항 (텍스트)
  - 루오타를 알게된 경로 (선택지)
- **유효성 검증**
  - 날짜: 오늘+5일 이후만 선택 가능, 과거/마감일 불가
  - 수량: 음료 120잔 이상, 디저트 20개 이상(단독 불가)
  - 연락처: 휴대폰 형식
  - 필수값 미입력 시 에러 메시지

### 2.3. 예약 요약/확인

- 입력값 요약 및 가격/비용 안내
- 예약 절차, 결제 안내, 유의사항 표시
- [예약 신청] 버튼 클릭 시 최종 제출

### 2.4. 예약 완료/알림

- 예약 완료 화면(접수번호, 안내문구, 문의 채널)
- 이메일/SMS(선택)로 접수 알림
- 마이페이지에서 예약 내역 확인(회원)

### 2.5. 예약 내역/변경/취소

- 마이페이지에서 예약 상세 조회, 상태(접수/확정/진행/완료/취소)
- 예약 변경/취소 요청(마감 전까지만, 관리자 승인 필요)
- 예약금/잔금 결제 안내(계좌, 카드 등)

---

## 3. 어드민 예약 관리 플로우

### 3.1. 예약 내역 조회

- `/admin/(private)/reservation`에서 전체 예약 리스트 확인
- 필터: 기간, 상태(접수/확정/진행/완료/취소), 검색(이름, 연락처 등)
- 리스트: 예약번호, 날짜, 장소, 예약자, 메뉴, 상태, 등록일 등

### 3.2. 예약 상세/처리

- 상세 정보(입력값 전체, 요청사항, 파일 첨부 등) 확인
- 상태 변경: 접수 → 확정/진행/완료/취소
- 예약금/잔금 입금 확인, 결제 내역 기록
- 변경/취소 요청 승인/거절
- 고객과 1:1 커뮤니케이션(내부 메모, 알림 발송)

### 3.3. 예약 통계/관리

- 월별/세트별 예약 통계, 매출 집계
- 예약 내역 엑셀 다운로드
- 예약 관련 알림/이력 관리

---

## 4. 데이터 모델(예시)

```ts
interface Reservation {
  id: string
  userId?: string // 회원일 경우
  name: string
  company: string
  phone: string
  eventDate: string // ISO8601
  eventTime: string // HH:mm
  eventPlace: string
  eventPlaceDetail?: string
  target: string
  menu: Array<{
    type: "drink" | "dessert"
    setName: string
    quantity: number
  }>
  electricity: "yes" | "no" | "unknown"
  etc?: string
  howFound?: string
  status: "pending" | "confirmed" | "in_progress" | "completed" | "cancelled"
  depositPaid: boolean
  balancePaid: boolean
  createdAt: string
  updatedAt: string
  adminMemo?: string
  changeRequest?: {
    type: "modify" | "cancel"
    requestedAt: string
    status: "pending" | "approved" | "rejected"
    memo?: string
  }
}
```

---

## 5. UI/UX 요구사항

- 반응형, 접근성 준수, 명확한 단계별 안내
- 입력값 실시간 검증 및 친절한 에러 메시지
- 예약 상태별 뱃지/컬러 구분
- 예약 완료 후 문의/상담 채널 바로 연결
- 관리자 화면: 테이블, 필터, 상세 패널, 상태변경 액션, 메모 UI

---

## 6. 알림/이벤트

- 예약 접수/확정/변경/취소 시 이메일(및 SMS) 알림
- 관리자: 신규 예약/변경/취소 실시간 알림
- 예약 상태 변경 시 이력 기록

---

## 7. 예외/검증/보안

- 예약 중복(동일 시간/장소) 방지
- 비정상 접근/봇 방지(Recaptcha 등)
- 개인정보 암호화 저장, 관리자만 연락처/상세정보 열람
- 예약 변경/취소는 마감일 전까지만, 이후는 관리자 문의

---

## 8. 관리/운영

- 예약 내역 백업/복구
- 예약 데이터 통계/분석
- 예약 관련 FAQ/공지사항 연동

---

## 9. 향후 확장 고려사항

- 결제 연동(카드, 간편결제)
- 예약금 자동 청구/알림
- 예약 확정 후 배너/디자인 파일 업로드 기능
